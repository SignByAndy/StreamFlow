<div class="planning-shell">
  <aside class="planning-sidebar">
    <div class="sidebar-header">
      <div>
        <h2>Mes plannings</h2>
        <div class="subtitle">Choisis un planning</div>
      </div>
      <button class="btn-add" (click)="createPlanning()">
        + Nouveau planning
      </button>
    </div>

    <div *ngIf="isLoading" class="status">Chargement...</div>
    <div *ngIf="!isLoading && plannings.length === 0" class="status">
      Aucun planning pour le moment.
    </div>

    <div class="planning-list" *ngIf="plannings.length > 0">
      <div
        class="planning-item"
        *ngFor="let planning of plannings"
        [class.active]="activePlanning?.id === planning.id"
        (click)="selectPlanning(planning)"
      >
        <div>
          <div class="title">{{ planning.title }}</div>
          <div class="date">{{ formatWeekRange(planning.week_start_date) }}</div>
        </div>
        <button
          class="btn-delete"
          type="button"
          aria-label="Supprimer le planning"
          (click)="$event.stopPropagation(); deletePlanning(planning)"
        >
          x
        </button>
      </div>
    </div>

    <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
  </aside>

  <section class="planning-board">
    <div class="board-header">
      <div>
        <div class="board-title">{{ activePlanning?.title || 'Planning de stream' }}</div>
        <div class="board-range">{{ activeWeekRange }}</div>
      </div>
    </div>

    <div class="week-grid" *ngIf="activePlanning; else emptyBoard">
      <div class="day-column" *ngFor="let day of weekDays">
        <div class="day-header">{{ day }}</div>
        <div class="day-slot">
          <span>+</span>
        </div>
      </div>
    </div>

    <ng-template #emptyBoard>
      <div class="empty-board">
        Cr√©e un planning pour afficher la grille.
      </div>
    </ng-template>
  </section>
</div>
